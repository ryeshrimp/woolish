import{S as x,i as S,s as A,e as T,f as k,g as m,h as f,j as y,k as M,l as b,o as C,n as _,p as j,q as $,r as P,u as I,c as L,m as O,t as B,a as F,d as N}from"./vendor.095b192b.js";function U(o){var t;let n,s,e=((t=o[0])==null?void 0:t.toFixed(4))+"",a;return{c(){n=T("div"),s=k("$"),a=k(e),m(n,"class","svelte-1mupq7r")},m(r,u){f(r,n,u),y(n,s),y(n,a)},p(r,u){var i;u&1&&e!==(e=((i=r[0])==null?void 0:i.toFixed(4))+"")&&M(a,e)},d(r){r&&b(n)}}}function W(o){let n,s=o[0]&&U(o);return{c(){s&&s.c(),n=C()},m(e,a){s&&s.m(e,a),f(e,n,a)},p(e,[a]){e[0]?s?s.p(e,a):(s=U(e),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:_,o:_,d(e){s&&s.d(e),e&&b(n)}}}function q(o,n,s){let e,a,t;const r=async()=>{e=(await(await fetch("https://min-api.cryptocompare.com/data/price?fsym=ETH&tsyms=USD",{method:"GET",headers:{Accept:"application/json"}})).json()).USD,a=(await(await fetch("https://api.thegraph.com/subgraphs/name/uniswap/uniswap-v3",{method:"POST",headers:{Accept:"application/json"},body:'{"query":"\\n  {\\n    pool(id: \\"0x7b12d855445073987d45ea97b1af3554f05e4ef4\\") {\\n      sqrtPrice\\n    }\\n  }\\n"}'})).json()).data.pool.sqrtPrice**2/2**192,s(0,t=a*e)};return j(()=>{const u=setInterval(()=>r(),1e4);return()=>clearInterval(u)}),r(),e=null,a=null,s(0,t=null),[t]}class z extends x{constructor(n){super();S(this,n,q,W,A,{})}}let v;window.ethereum?v=new window.Web3(window.ethereum):window.web3&&(v=new window.Web3(window.web3.currentProvider));const K=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"controller",type:"address"}],name:"addController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"controller",type:"address"}],name:"removeController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],D=async o=>{try{return await v.eth.getTransactionReceipt(o)}catch{return null}},R=async o=>{try{return(await v.eth.getBlock(o)).timestamp}catch{return null}},Y=async()=>{try{const o=await v.eth.getBlockNumber();let s=await new v.eth.Contract(K,"0x8355dbe8b0e275abad27eb843f3eaf3fc855e525").getPastEvents({event:"Transfer",fromBlock:o-600,toBlock:"latest",topics:["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef"]});const e=new Set;let a={};const t=[...s].reverse(),r=t.filter((i,c)=>{var p;return e.add(i.blockNumber),c===0?!0:i.transactionHash!==((p=t[c-1])==null?void 0:p.transactionHash)});for(let i of s){const c=s.indexOf(i),p=await D(i.transactionHash);s[c].logs=p.logs}for(let i of e)a[i]=await R(i);return r.map(i=>{var c,p,w,h;return i.timestamp=a[i.blockNumber],((c=i.returnValues)==null?void 0:c.from)==="0x0000000000000000000000000000000000000000"?(i.source="POUCH CLAIM",(p=i.logs)==null||p.forEach(g=>{console.log(g.topics),g.topics.includes("0x7479a7843bdace382d2299e185f766e52dbba87577c9a9f881008f44398bc287")&&(i.source="UNSTAKE")}),i.wool=parseFloat((i.returnValues.value/1e18).toFixed(3))):((w=i.returnValues)==null?void 0:w.to)==="0x0000000000000000000000000000000000000000"?(i.source="STAKE",i.wool=parseFloat((i.returnValues.value/1e18).toFixed(3))):((h=i.returnValues.to)==null?void 0:h.toLowerCase())==="0x7b12d855445073987d45ea97b1af3554f05e4ef4"?(i.source="SELL",i.wool=parseFloat((i.returnValues.value/1e18).toFixed(3))):(i.source="BUY",i.wool=parseFloat((i.returnValues.value/1e18).toFixed(3))),{source:i.source,amount:i.wool,tx:i.transactionHash,timestamp:i.timestamp}})}catch(o){return console.log(o),null}};function V(o,n,s){const e=o.slice();return e[3]=n[s],e}function G(o){let n;return{c(){n=T("div"),n.textContent="Install metamask to retrieve live stats",m(n,"class","metamask-error svelte-1uzehuj")},m(s,e){f(s,n,e)},p:_,d(s){s&&b(n)}}}function J(o){let n,s=o[0],e=[];for(let a=0;a<s.length;a+=1)e[a]=H(V(o,s,a));return{c(){n=T("section");for(let a=0;a<e.length;a+=1)e[a].c();m(n,"class","svelte-1uzehuj")},m(a,t){f(a,n,t);for(let r=0;r<e.length;r+=1)e[r].m(n,null)},p(a,t){if(t&3){s=a[0];let r;for(r=0;r<s.length;r+=1){const u=V(a,s,r);e[r]?e[r].p(u,t):(e[r]=H(u),e[r].c(),e[r].m(n,null))}for(;r<e.length;r+=1)e[r].d(1);e.length=s.length}},d(a){a&&b(n),I(e,a)}}}function H(o){let n,s=new Date(o[3].timestamp*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})+"",e,a,t,r,u=o[3].source+"",i,c,p,w=o[3].amount.toLocaleString()+"",h,g,E;return{c(){n=T("span"),e=k(s),a=$(),t=T("a"),r=T("div"),i=k(u),c=$(),p=T("p"),h=k(w),g=$(),m(n,"class","svelte-1uzehuj"),P(r,"background-color",o[1](o[3].source)),m(r,"class","svelte-1uzehuj"),m(p,"class","svelte-1uzehuj"),m(t,"href",E="https://etherscan.io/tx/"+o[3].tx),m(t,"target","_BLANK"),P(t,"border-bottom","1px solid "+o[1](o[3].source)),m(t,"class","svelte-1uzehuj")},m(l,d){f(l,n,d),y(n,e),f(l,a,d),f(l,t,d),y(t,r),y(r,i),y(t,c),y(t,p),y(p,h),y(t,g)},p(l,d){d&1&&s!==(s=new Date(l[3].timestamp*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})+"")&&M(e,s),d&1&&u!==(u=l[3].source+"")&&M(i,u),d&1&&P(r,"background-color",l[1](l[3].source)),d&1&&w!==(w=l[3].amount.toLocaleString()+"")&&M(h,w),d&1&&E!==(E="https://etherscan.io/tx/"+l[3].tx)&&m(t,"href",E),d&1&&P(t,"border-bottom","1px solid "+l[1](l[3].source))},d(l){l&&b(n),l&&b(a),l&&b(t)}}}function Q(o){let n;function s(t,r){return t[0]?J:G}let e=s(o),a=e(o);return{c(){a.c(),n=C()},m(t,r){a.m(t,r),f(t,n,r)},p(t,[r]){e===(e=s(t))&&a?a.p(t,r):(a.d(1),a=e(t),a&&(a.c(),a.m(n.parentNode,n)))},i:_,o:_,d(t){a.d(t),t&&b(n)}}}function X(o,n,s){let e;const a=async()=>{s(0,e=await Y())};j(()=>{const r=setInterval(()=>a(),1e4);return()=>clearInterval(r)}),a();const t=r=>r==="STAKE"?"#ff9f43":r==="UNSTAKE"?"#feca57":r==="SELL"?"#ee5253":r==="POUCH CLAIM"?"#0abde3":r==="BUY"?"#1dd1a1":"#fff";return s(0,e=[]),[e,t]}class Z extends x{constructor(n){super();S(this,n,X,Q,A,{})}}function ee(o){let n,s,e,a;return n=new z({}),e=new Z({}),{c(){L(n.$$.fragment),s=$(),L(e.$$.fragment)},m(t,r){O(n,t,r),f(t,s,r),O(e,t,r),a=!0},p:_,i(t){a||(B(n.$$.fragment,t),B(e.$$.fragment,t),a=!0)},o(t){F(n.$$.fragment,t),F(e.$$.fragment,t),a=!1},d(t){N(n,t),t&&b(s),N(e,t)}}}class ne extends x{constructor(n){super();S(this,n,null,ee,A,{})}}export{ne as default};
